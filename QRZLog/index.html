<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radio Pro - Log & Plan</title>
    <style>
        :root {
            --primary: #4361ee; --primary-hover: #3a56d4;
            --success: #2ec4b6; --danger: #e71d36;
            --warning: #ff9f1c; --bg: #f8f9fa;
            --text: #2b2d42; --card-bg: #ffffff;
        }

        * { box-sizing: border-box; font-family: 'Segoe UI', Tahoma, sans-serif; }
        body { background: var(--bg); color: var(--text); margin: 0; padding-bottom: 20px; }
        
        /* Navegación Profesional */
        nav { 
            background: var(--primary); display: flex; justify-content: center; 
            padding: 10px; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        nav button { 
            background: transparent; border: none; color: white; padding: 10px 20px; 
            cursor: pointer; font-weight: bold; border-radius: 5px; transition: 0.3s;
        }
        nav button.active { background: rgba(255,255,255,0.2); }

        .container { max-width: 800px; margin: 20px auto; padding: 0 15px; }
        .section { display: none; }
        .section.active { display: block; }

        header { text-align: center; padding-bottom: 20px; }
        .logo { width: 40px; fill: var(--primary); vertical-align: middle; }

        /* Estilos Logbook (Optimizado móvil) */
        .log-form { 
            background: var(--card-bg); padding: 20px; border-radius: 15px; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.05); margin-bottom: 20px;
        }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .full-width { grid-column: span 2; }
        input, select { width: 100%; padding: 12px; border: 2px solid #edf2f4; border-radius: 8px; outline: none; }
        .btn-main { width: 100%; padding: 15px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; background: var(--primary); color: white; }

        .log-card { 
            background: var(--card-bg); padding: 15px; border-radius: 10px; margin-bottom: 10px;
            border-left: 5px solid var(--primary); display: flex; justify-content: space-between; align-items: center;
        }
        .badge { background: #edf2f4; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem; }

        /* Tabla Plan de Bandas */
        .plan-table { width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden; font-size: 0.9rem; }
        .plan-table th, .plan-table td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        .plan-table th { background: #f1f3f5; color: var(--primary); }
        .tx-yes { color: var(--success); font-weight: bold; }
        .tx-no { color: var(--danger); font-weight: bold; }

        @media (min-width: 600px) {
            .grid { grid-template-columns: repeat(4, 1fr); }
            .full-width { grid-column: span 4; }
        }
    </style>
</head>
<body>

<nav>
    <button id="nav-log" class="active" onclick="switchTab('logbook')">LOGBOOK</button>
    <button id="nav-plan" onclick="switchTab('plan')">PLAN DE BANDAS</button>
</nav>

<div class="container">
    
    <div id="logbook" class="section active">
        <header>
            <svg class="logo" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"/></svg>
            <h1 style="display:inline; margin-left:10px;">Radio Log</h1>
        </header>

        <div class="log-form">
            <input type="hidden" id="editId">
            <div class="grid">
                <input type="text" id="callsign" placeholder="Indicativo">
                <input type="text" id="rst" value="59" placeholder="RST">
                <select id="band">
                    <option value="40m">40m</option><option value="20m">20m</option>
                    <option value="2m">2m</option><option value="70cm">70cm</option>
                    <option value="PMR">PMR</option>
                </select>
                <select id="mode">
                    <option value="SSB">SSB</option><option value="FM">FM</option>
                    <option value="FT8">FT8</option><option value="CW">CW</option>
                </select>
                <input type="text" id="comment" class="full-width" placeholder="Comentarios...">
            </div>
            <button id="saveBtn" class="btn-main" style="margin-top:15px" onclick="handleSubmit()">REGISTRAR QSO</button>
        </div>

        <div id="logList"></div>
    </div>

    <div id="plan" class="section">
        <h2>Plan de Bandas & Capacidades H8</h2>
        <div style="overflow-x: auto;">
            <table class="plan-table">
                <thead>
                    <tr>
                        <th>Banda</th>
                        <th>Rango (MHz)</th>
                        <th>TX</th>
                        <th>Mod.</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>FM Radio</td><td>65 - 108</td><td class="tx-no">NO</td><td>WFM</td></tr>
                    <tr><td>Airband</td><td>108 - 136</td><td class="tx-no">NO</td><td>AM</td></tr>
                    <tr><td><b>2 metros</b></td><td>144 - 146</td><td class="tx-yes">SÍ</td><td>FM/NFM</td></tr>
                    <tr><td>VHF High</td><td>136 - 174</td><td class="tx-no">RX*</td><td>FM</td></tr>
                    <tr><td>Banda 220</td><td>200 - 260</td><td class="tx-yes">SÍ*</td><td>FM</td></tr>
                    <tr><td>UHF 300</td><td>350 - 390</td><td class="tx-no">NO</td><td>FM</td></tr>
                    <tr><td><b>70 cm</b></td><td>430 - 440</td><td class="tx-yes">SÍ</td><td>FM/NFM</td></tr>
                    <tr><td>PMR446</td><td>446.0 - 446.2</td><td class="tx-no">RX*</td><td>NFM</td></tr>
                    <tr><td>UHF High</td><td>400 - 520</td><td class="tx-no">RX*</td><td>FM</td></tr>
                </tbody>
            </table>
        </div>
        <p style="font-size: 0.8rem; color: #666; margin-top: 15px;">
            * Nota: El Tidradio H8 puede transmitir en rangos extendidos (136-174 / 400-520) si está desbloqueado, pero fuera de las bandas de aficionado (en negrita) la emisión puede no ser legal o requerir licencias especiales. ¡No digas que no te avisé!
        </p>
    </div>

</div>

<script>
    let logs = JSON.parse(localStorage.getItem('hamLogs')) || [];
    let isEditing = false;

    function switchTab(tabId) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        document.getElementById('nav-' + (tabId === 'logbook' ? 'log' : 'plan')).classList.add('active');
    }

    function handleSubmit() {
        const id = document.getElementById('editId').value;
        const data = {
            id: id ? parseInt(id) : Date.now(),
            timestamp: new Date().toISOString().replace('T', ' ').substring(0, 16),
            callsign: document.getElementById('callsign').value.toUpperCase(),
            rst: document.getElementById('rst').value,
            band: document.getElementById('band').value,
            mode: document.getElementById('mode').value,
            comment: document.getElementById('comment').value
        };

        if(!data.callsign) return alert("¿A quién llamas? Pon un indicativo.");

        if(isEditing) {
            logs = logs.map(l => l.id === data.id ? data : l);
            isEditing = false;
            document.getElementById('saveBtn').innerText = "REGISTRAR QSO";
            document.getElementById('saveBtn').style.background = "var(--primary)";
        } else {
            logs.unshift(data);
        }

        document.getElementById('editId').value = '';
        document.getElementById('callsign').value = '';
        document.getElementById('comment').value = '';
        saveAndRender();
    }

    function editLog(id) {
        const log = logs.find(l => l.id === id);
        document.getElementById('editId').value = log.id;
        document.getElementById('callsign').value = log.callsign;
        document.getElementById('rst').value = log.rst;
        document.getElementById('band').value = log.band;
        document.getElementById('mode').value = log.mode;
        document.getElementById('comment').value = log.comment;
        isEditing = true;
        document.getElementById('saveBtn').innerText = "ACTUALIZAR";
        document.getElementById('saveBtn').style.background = "var(--warning)";
        switchTab('logbook');
        window.scrollTo(0,0);
    }

    function saveAndRender() {
        localStorage.setItem('hamLogs', JSON.stringify(logs));
        const list = document.getElementById('logList');
        list.innerHTML = logs.map(log => `
            <div class="log-card">
                <div>
                    <b>${log.callsign}</b> <span class="badge">${log.band}</span> <span class="badge">${log.mode}</span>
                    <div style="font-size:0.8rem; color:#666">${log.timestamp} - ${log.comment}</div>
                </div>
                <div>
                    <button onclick="editLog(${log.id})" style="border:none; background:none; cursor:pointer; color:var(--primary)">Edit</button>
                </div>
            </div>
        `).join('');
    }

    saveAndRender();
</script>
</body>
</html>
